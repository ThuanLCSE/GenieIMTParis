 <!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>Bonjour, Courses - Livraison des courses a domicile</title>

  <!-- Custom fonts for this theme -->
  <link href="./css/all.min.css" rel="stylesheet" type="text/css">
  <link href="./css/bjrc.css" rel="stylesheet" type="text/css">
  <link href="./css/jquery-ui.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">

  <!-- Theme CSS -->
  <link href="./css/freelancer.min.css" rel="stylesheet">
  <div id="fb-root"></div>
  <script async defer crossorigin="anonymous" src="https://connect.facebook.net/fr_FR/sdk.js#xfbml=1&version=v6.0"></script>
</head>
<body id="page-top">

  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg bg-secondary text-uppercase fixed-top" id="mainNav">
    <div class="container"> 
   <a class="navbar-brand" href="./">
      <img src="./img/logo.png" alt="logo">
    </a> 
      <a class="navbar-brand js-scroll-trigger">Bonjour, Courses</a>
    <div class="navbar-toggler navbar-toggler-right text-uppercase  text-white rounded" >
      </div>
      <div class="collapse navbar-collapse" id="navbarResponsive">
    </div>   
    </div>
  </nav>

  <!-- Masthead -->
  <header class="masthead bg-primary text-white text-center">  
      <!-- Masthead Heading -->
    <h4>Bonjour, vous allez aider <span class="lblName">lui</span> à faire ses courses, veuillez lire les conseils ci-dessous avant d'entrer en contact avec <span class="lblName">lui</span></h4>
       <p class="masthead-subheading font-weight-light mb-0">
        <!-- <a class="btn btn-xl btn-outline-light" href='./trajet.html'>  -->
        <a class="btn btn-xl btn-outline-light btn-login" href="./"> 
            Se connecter pour garder les crédits
        </a>
        <a class="btn btn-xl btn-outline-light" href="./"> 
            <i class="fas fa-arrow-circle-left"></i> Retour à la page d'accueil
        </a>
      </p>
  </header>

 
<div class="container">  
  <div class="row">  
  	<div class="col-12">
  		<ul class="list-unstyled">
  			<li>C'est vous qui proposez et negociez le frais de livraison. On vous conseille d'un montant entre 1 et 4 euros si son adresse vous convient.</li>
			<li>Essayez de mettre en d'accord entre vous avant de payer les courses (la methode de virement, le frais de livraison, choisir le lieu exact de rendez-vous). Sinon, vous pouvez annuler le service à tout moment.</li>
			<li>Il vaut mieux demander lui de faire un depot sur le website si le montant des courses est eleve pour vous. Cela vous permet de faire confiance avec lui</li>
			<li>Demander s'il y a les produits frais ou surgelés dans la liste, si oui, demander lui d'ajouter un sac isotherme dans la liste et de le payer. S'il n'est pas d'accord, vous avez tout le droit de ne les acheter pas.</li>
			<li>Il vaut mieux prevenir l'heure precise de faire les courses et l'heure d'arrivée. Demandez-lui d'etre presente vers cet temps.</li>
			<li>Quand vous livrer les courses, demande-lui de confirmer la bonne reception sur le site.</li>
			<li>Vous recevrez toujours 100% du prix des courses en tous cas. Vous receverez le frais de livraison, une foie il confirme la bonne reception des courses</li>
			<li>Prevenir lui de la decale de l'heure d'arrivee en cas d'un accident pendant une livraison</li>	  
			<li>Mettre en accord entre vous de ne pas utiliser les données personelles apres la transaction (adresse postale, numéro de téléphone, adresse e-mail, etc.).</li>
		</ul>
		Comment faire lorsde la livraison:
		<ol>
		  <li>Appelez-le 2 fois entre 2-3 minutes avec le numero ci-dessous</li>
		  <li>Si il ne vous contacte pas apres la 2e appel, signaler la livraison est bonne mais personne a domicile sur le website</li>
		  <li>Vous pouvez garder les courses</li>
		</ol>
  	</div>
      <div class="form-group col-12">
        <b>Nom</b> : <span class="lblName">lui</span>, <b>domicile</b>: <span id='lblAddress'></span> 
      </div> 
      <div class="form-group col-12 col-lg-6  ">
        <span><b>Magazin Adresse</b> </span> <span id='lblStoreAddress'></span>
      </div>
      <div class="form-group col-6 col-lg-6  ">
        <span><b>Magazin</b> </span> <span id='lblStore'></span>
      </div>  
		 	<ul class="list-group col-lg-12 mb-3" id='offreLst'>
			  	  
			</ul> 
      <div class="form-group  col-sm-12 offset-md-1 col-md-10 d-flex justify-content-center" id="actBtnDiv">
      <!--   <a class="btn btn-primary " href="./store.html">Creer un nouveau </a>
        <button class="btn btn-danger"  data-toggle="modal" data-target="#mdlDelDemandWithCode" type="button">Supprimer la demande</button>  -->
      </div>
	</div>
</div> 	
  <div id="includedFooter"></div>  
 
  <!-- Bootstrap core JavaScript -->
  <script src="./js/jquery.min.js"></script>
  <script src="./js/bootstrap.min.js"></script> 
  <script src="./js/js.cookie.min.js"></script> 
   
<div class="portfolio-modal modal fade" id="mdlDelDemandWithCode" tabindex="-1" role="dialog" aria-labelledby="mdlDelDemandWithCode" aria-hidden="true">
  <div class="modal-dialog modal-md" role="document">
    <div class="modal-content">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">
          <i class="fas fa-times"></i>
        </span>
      </button>
      <div class="modal-body ">
        <div class="container">
          <div class="row">
              <div class="form-group col-6">
                  <label for="inpCode"><b>Code (4 chiffres)</b></label>
                  <input type="text" class="form-control"  name="code" id="inpCode" required>
              </div> 
               <div class="form-group col-6 ">
                <button class="btn btn-primary" onclick="sendCode()" type="button">Envoie code par email</button> 
              </div>
              <h4>Es-tu sûr de vouloir supprimer ?</h4>
            <button class="btn btn-primary col-6 " data-dismiss="modal" type="button">Non</button> 
            <button class="btn btn-danger col-6 " onclick="deleteDemandWithCode()" type="button">Oui</button> 
          </div>
        </div>
      </div>
    </div>
  </div>
</div> 
<div class="portfolio-modal modal fade" id="mdlUserId" tabindex="-1" role="dialog" aria-labelledby="portfolioModal1Label" aria-hidden="true">
  <div class="modal-dialog modal-md" role="document">
    <div class="modal-content">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">
          <i class="fas fa-times"></i>
        </span>
      </button>
      <div class="modal-body ">
        <div class="container">
          <div class="row loginForm">
              <div class="form-group col-12 ">
            	<label for="username"><b>Username</b></label>
			    <input type="text" class="form-control"  name="username" required>
	        </div>
              <div class="form-group col-12 ">
			    <label for="psw"><b>Password</b></label>
			    <input type="password" class="form-control"  name="psw" required>
	        </div>

		    <button class="btn btn-primary col-12 mb-3" type="button">Login to my account</button> 
        <button class="btn btn-primary col-12 " onclick="showRegisterForm()" type="button">Create new account</button> 
		    <div class="divider-custom">
                <div class="divider-custom-line"></div>
                  OR 
                <div class="divider-custom-line"></div>
              </div>
              <div class="form-group col-12 ">
		          <label for="inpPhone">Enter you 06 (ca marche: 06 30 19 08 87)</label>
		          <input type="text" name='phone' class="form-control" id="inpPhone" />
	        </div>
              <button class="btn btn-primary col-12 " onclick="buyWithPhone()"> 
                Use my 06
              </button>
          </div>
          <div class="row registerForm">
            <div class="form-group col-12 ">
              <label for="rgtUsername"><b>Phone number</b></label>
              <input type="text" class="form-control" id="rgtUsername" name="rgtUsername" required>
            </div>
            <div class="form-group col-12 ">
              <label for="rgtFullname"><b>Full name</b></label>
              <input type="text" class="form-control" id="rgtFullname" name="rgtFullname" required>
            </div>
            <div class="form-group col-12 ">
              <label for="rgtPassword"><b>Password</b></label>
              <input type="password" class="form-control" id="rgtPassword" name="rgtPassword" required>
            </div>
            <div class="form-group col-12 ">
	            <button class="btn btn-primary col-12 mb-3 " onclick="register()" type="button">Create new account</button>   

	            <button class="btn btn-primary col-12 " type="button">Login to my account</button> 
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>  
</body>
<script  src="./js/data.js"></script>

<script type="text/javascript"> 

var url = new URL(window.location.href);
var idDemand = url.searchParams.get("did"); 

function consultDemand() {
	$.ajax({
    url: '/demand/detail',
    type: 'POST', 
    data: JSON.stringify({ 
      'id' : idDemand
    }),
    contentType: "application/json",
    success: function(data){ 
    $('.lblName').text(data.name.toUpperCase()) 
  	$('#lblAddress').text(data.address.line1 )
  	$('#lblStoreAddress').text(data.store.address )
  	$('#lblStore').text(data.store.name )
  	var chatBtn = (data.userId == Cookies.get("uId") || data.userId === null)? "" : `- <a href="./chatBox.html?id=${data.userId}&did=${idDemand}&act=pickDemand" class="btn border-primary text-primary">Chat avec ${data.name.toUpperCase()} <i class="fas fa-comments"></i></a>`
      chatBtn = (!data.userId && data.phone) ? `<a href="tel:${data.phone}" class="btn btn-outline-primary ml-auto"><i class="fas fa-mobile-alt"></i> Texto a: ${data.phone}</a>` : chatBtn 
      $('#actBtnDiv').append(chatBtn)
    $('#offreLst').empty()
    for  (const item of data.tobuys) { 
      $('#offreLst').append(`<li class="list-group-item d-flex justify-content-between align-items-center">
         ${item.name.replace(" | Link", "")}  ${validURL(item.link)? "| <a href="+ item.link +">Link</a>" : ""}
        <span class="badge badge-primary badge-pill">${item.qty}</span>
      </li>`);
    }
    },error: function()
     {
        alert("Error can't get the demand")
     }
    });  
}
$( document ).ready(function() {
    if (Cookies.get("uId") !== undefined) {
      $('.btn-login').hide()
    }
  	$("#includedFooter").load("./footer.html"); 
  	consultDemand()
}) 

  
</script>

</html>

